#pragma once

extern thread_local uint32 LThreadId;

/*
✅ TLS란? (Thread Local Storage)
- TLS는 각 스레드가 자기만의 변수 복사본을 갖도록 해주는 저장소 영역.
- 같은 전역 변수라도 스레드마다 서로 다른 값을 저장할 수 있게 해주는 기술.

-> 스레드별 고유 전역 공간이라고 봐도 무방.

🧠 왜 필요한가?
멀티스레드 환경에서는 전역 변수나 정적 변수는 공유 자원이 돼서 데이터 레이스 문제가 발생할 수 있어.

하지만 어떤 변수는 스레드 전용 데이터가 필요한 경우가 있음:

예: 로그 버퍼, 랜덤 시드, 스레드 ID, 임시 작업 공간 등

이럴 때 스레드마다 독립적인 변수를 만들고 싶다 → 그게 바로 TLS.


✅ C++에서 TLS 사용하는 방법

thread_local int tlsCounter = 0;

thread_local 키워드를 붙이면,

이 변수는 스레드마다 별개의 복사본을 갖는다.

따라서 스레드 A가 tlsCounter = 1; 하고,

스레드 B가 tlsCounter = 100; 해도 서로 영향 없음



✅ 메모리 구조 그림 (개념)

[스레드 A]
  └ tlsId = 1  (자기만의 복사본)

[스레드 B]
  └ tlsId = 2  (다른 복사본)

전역 변수처럼 보이지만 실은 스레드별 복사본!


																																																				*/